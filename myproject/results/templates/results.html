{% extends "base_template.html" %}

{% block content %}

  <h1>Results</h1>
  <p>Welcome to TemplateLibrary, a website developed by <em>Dan Bryan-Smith</em>!</p>
  {% comment %}
  <h2>Dynamic content</h2>
  <p>The library has the following record counts:</p>
  <ul>
    <li><strong>Templates:</strong> {{ num_templates }}</li>
    <li><strong>Types:</strong> {{ num_types }}</li>
  </ul>
{% endcomment %}


<br>
<br>





<!-- <div class="stringdesc">
    <div class="string">"This is a string."</div>
</div> -->
<!-- <div id="code-view">
<p class="error_trace">{{ error_trace}}</p>
</div> -->
<br>
<div class="container-fluid px-0">
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel" data-interval="false" data-wrap="false">
      <div class="carousel-inner bg-info">
        <div class="carousel-item active">
            <div class="carousel-flex-container">

    <!-- PART 1 -->
    <!-- TRACE OVERVIEW -->

                <div style="width:70%; background:#D4D4D4"><h2>Trace Overview</h2>
                <div id="trace-view">
                {% for line in lines %}
                    {% if line.1 == 'HEAD' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% elif line.1 == 'FSUM' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% elif line.1 == 'FSL' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% elif line.1 == 'EXC' %}
                        <div class="error-EXC"><b>{{ line.0.split.0 }}</b>{{ line.0.split|slice:"1:" }}</div>
                    {% endif %}
                {% endfor %}
                </div></div>

                <br>
                {% if error_type.name == "Unknown" %}
                    <h4>Looks like we couldn't find your error :(</h4>
                {% else %}
                    <h4>It looks like your type of error was a {{error_type}}.</h4>
                    {% endif %}
            </div>
        </div>
        <div class="carousel-item">
            <div class="carousel-flex-container">

    <!-- PART 2 -->
    <!-- CODE BREAKDOWN -->

                <div style="width:70%; background:#D4D4D4"><h2>Trace</h2>
                <div id="trace-view">
                {% for line in lines %}
                    {% if line.1 == 'HEAD' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% elif line.1 == 'FSUM' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% elif line.1 == 'FSL' %}
                        <div class="error-FSL">{{ line.0 }}</div>
                    {% elif line.1 == 'EXC' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% endif %}
                {% endfor %}
                </div></div>
                <br>
                <div id=code style="width:70%;">
                {% for line, l_num in lines_zipped %}
                    {% if line.1 == 'FSL' %}
                    <h3>Line {{l_num}}</h3>
                    <div class="flex-container">
                        {% for item in line.2 %}
                            <div class="flex-child">
                            {% if item.0 == 'expression' %}
                                <div class="expression" title = "Expression" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="Not quite sure what this is. Probably a variable of some sort.">{{ item.1 }}</div>
                            {% elif item.0 == 'string' %}
                                <div class="string" title = "String" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="Strings represent text in a program.">"{{ item.1 }}"</div>
                            {% elif item.0 == 'int' %}
                                <div class="number" title = "Integer" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="Integers represent whole numbers.">{{ item.1 }}</div>
                            {% elif item.0 == 'float' %}
                                <div class="number" title = "Float" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="Floats can hold decimal values.">{{ item.1 }}</div>
                            {% elif item.0 == 'function' or item.0 == 'method'%}
                                {% if item.0 == 'function' %}
                                <div class="function" title = "Function" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="The function '{{item.1.name}}'.">
                                    {{ item.1.name }}(
                                {% elif item.0 == 'method' %}
                                <div class="function" title = "Method" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="The method '{{item.1.name}}'.">
                                    .{{ item.1.name }}(
                                {% endif %}

                                {% with cont=item.1.params template_name="code_nested.html" %}
                                {%include template_name %}
                                {%endwith%}<div class="function" title = "Method" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="The method '{{item.1.name}}'.">)</div>
                            {% elif item.0 == 'attribute' %}
                                <div class="attribute" title = "Attribute" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="Attributes are properties that belong to the previous object (the thing before the .)">.{{ item.1 }}</div>
                            {% elif item.0 == 'control' %}
                                <div class="control" title = "Control Statement" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="Control statements decide on the flow of the program.">{{ item.1 }}</div>
                            {% elif item.0 == 'operator' %}
                                <div class="operator" title = "Operator" data-trigger = "hover" data-placement = "bottom" data-container="body" data-toggle="popover" data-content="Operators perform simple tasks on values.">{{ item.1 }}</div>
                            {% endif %}

                            </div>
                        {% endfor %}
                        </div>
                    {% endif %}
                {% endfor %}
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="carousel-flex-container">

                <!-- PART 3 -->
                <!-- CODE BREAKDOWN -->
                <div style="width:70%; background:#D4D4D4"><h2>Trace</h2>
                <div id="trace-view">
                {% for line in lines %}
                    {% if line.1 == 'HEAD' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% elif line.1 == 'FSUM' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% elif line.1 == 'FSL' %}
                        <div class="error-DEFAULT">{{ line.0 }}</div>
                    {% elif line.1 == 'EXC' %}
                        <div class="error-EXC">{{ line.0 }}</div>
                    {% endif %}
                {% endfor %}
                </div></div>
                <br>

                <h4>Template:</h4>
                <h5>{{error_template}}</h5>

                with parameters:<br>
                {% for p in params %}
                    {{ p }}<br>
                {% endfor %}
                <br>
                with tags:<br>
                {% for t in tags %}
                    {{ t }}<br>
                {% endfor %}

            </div>
        </div>
        <div class="carousel-item">
            <div class="carousel-flex-container">

                <h4>Examples</h4>
                {% for ex in examples %}
                    <pre><code class="python">{{ ex }}</code></pre>
                {% endfor %}

            </div>
        </div>

        <div class="carousel-item">
            <div class="carousel-flex-container">

                <div style="display: flex; flex-direction: row; flex-wrap: wrap">

                    {% for tip in tips %}
                    {#  Single Card Template:#}
                      <div class="card" style="width: 18rem; margin: 10px">
                        <div class="card-body">
                          <div style="display: flex; flex-direction: row">
                            <h5 class="card-title">{{ tip.name }}</h5>
                            <!-- {#  Colored cirlce:#}
                            <div style="
                              background: red;
                              width: 20px;
                              height: 20px;
                              margin-left: 10px;
                              border-radius: 50%;
                            "></div> -->
                          </div>
                          <p class="card-text">{{ tip.description}}</p>
                          <a href= {{tip.link}} class="btn btn-primary">Help</a>
                        </div>
                      </div>
                      {% endfor %}
                 </div>

            </div>
        </div>
      <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
</div>
<br>




     <br>
     {{ lines }}

<script>
    $('.carousel').carousel({
  interval: false,
  wrap: false;
});
</script>
{% endblock content %}
